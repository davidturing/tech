# 第4章：数据清洗与预处理

## 本章概述
数据清洗是数据分析中最耗时但最关键的步骤。本章将深入讲解如何处理现实世界中的"脏数据"，包括缺失值、异常值、重复数据、格式不一致等问题。

## 教学目标
- 掌握Pandas中数据清洗的核心方法
- 理解不同缺失值处理策略的适用场景
- 学会识别和处理异常值
- 掌握数据类型转换和格式标准化技巧

## 核心知识点

### 4.1 缺失值处理
```python
# 检测缺失值
df.isnull().sum()
df.info()

# 删除缺失值
df.dropna()  # 删除包含缺失值的行
df.dropna(axis=1)  # 删除包含缺失值的列

# 填充缺失值
df.fillna(0)  # 用0填充
df.fillna(df.mean())  # 用均值填充
df['column'].fillna(method='ffill')  # 前向填充
```

### 4.2 异常值检测与处理
- **IQR方法**：Q1 - 1.5*IQR, Q3 + 1.5*IQR
- **Z-score方法**：|z| > 3 为异常值
- **可视化方法**：箱线图、散点图

### 4.3 数据类型转换
```python
# 字符串转数值
df['price'] = pd.to_numeric(df['price'], errors='coerce')

# 日期处理
df['date'] = pd.to_datetime(df['date'])

# 分类数据
df['category'] = df['category'].astype('category')
```

### 4.4 文本数据清洗
- 正则表达式清洗
- 字符串标准化（大小写、空格等）
- 中文文本特殊处理

## 实践案例
使用真实电商数据集，演示完整的数据清洗流程：
1. 数据质量评估
2. 缺失值分析与处理
3. 异常订单识别
4. 价格格式标准化
5. 客户信息一致性检查

## 教学建议
- 强调动手实践的重要性
- 使用Jupyter Notebook进行交互式教学
- 鼓励学生在自己的数据集上练习
- 讨论数据清洗对后续分析的影响

## 课后作业
1. 基础练习：给定一个包含各种问题的数据集，完成清洗任务
2. 进阶挑战：设计自动化的数据质量检查脚本
3. 思考题：在什么情况下应该删除数据而不是修复数据？